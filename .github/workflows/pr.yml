
name: Deployment

on: [push, pull_request]

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - run: mvn clean install -pl mongo-utils
            - name: Ballerina build with tests
              uses: ballerina-platform/ballerina-action/@swan-lake-release
              with:
                args:
                  build -a

    windows-build:
        runs-on: windows-latest
        steps:
            - uses: actions/checkout@v2
            - run: mvn clean install -pl mongo-utils
            - name: Ballerina build with tests
              uses: ballerina-platform/ballerina-action/@swan-lake-release
              with:
                args:
                  build -a